{% extends "two_factor/_base.html" %}

{% load i18n %}
{% load django_bootstrap_breadcrumbs %}

{% block title %}{% trans "Login" %}{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb 'Account' None %}
    {% breadcrumb 'Login' None %}
{% endblock %}

{% block content %}
    <h1>
        {% trans "Login" %}

        {% if wizard.steps.current == 'auth' %}
            <small>
                {% blocktrans trimmed %}
                    Enter your credentials.
                {% endblocktrans %}
            </small>
        {% elif wizard.steps.current == 'token' %}
            <small>
                {% blocktrans trimmed %}
                    Please enter the tokens generated by your token generator.
                {% endblocktrans %}
            </small>
        {% elif wizard.steps.current == 'backup' %}
            <small>
                {% blocktrans trimmed %}
                    Use this form for entering backup tokens for logging in. These tokens have been generated for you to
                    print and keep safe. Please enter one of these backup tokens to login to your account.
                {% endblocktrans %}
            </small>
        {% endif %}
    </h1>

    <form action="" method="post" class="form-horizontal login-form">{% csrf_token %}
        {% include "two_factor/_wizard_forms.html" %}

        {# hidden submit button to enable [enter] key #}
        <input type="submit" value="" class="hidden" />

        <input type="hidden" name="next" value="{{ next }}" />

        {% if backup_tokens %}
            <p>{% trans "As a last resort, you can use a backup token:" %}</p>
            <p>
                <button
                    name="wizard_goto_step"
                    type="submit"
                    value="backup"
                    class="btn btn-secondary btn-mobile-block">
                    {% trans "Use Backup Token" %}
                </button>
            </p>
        {% endif %}

        {% include "two_factor/_wizard_actions.html" %}
    </form>
{% endblock %}
