{% extends 'base.html' %}

{% load astrobin_apps_donations_tags %}
{% load avatar_tags %}
{% load i18n %}
{% load django_bootstrap_breadcrumbs %}
{% load tags %}
{% load toggleproperty_tags %}
{% load staticfiles %}

{% block title %}{% blocktrans with user=requested_user.userprofile %}{{user}}'s gallery{% endblocktrans %}{% endblock %}
{% block container_extra_classes %}has-subnav{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb_safe 'Users' None %}
    {% breadcrumb requested_user.userprofile.get_display_name None %}
{% endblock %}

{% block content %}
    <a class="anchor" name="page_anchor"></a>

    {% include 'user/profile/navigation.html' %}

    {% if requested_user == request.user and section == 'staging' %}
    <div class="subtitle">
        <i class="icon icon-info-sign"></i>
        {% blocktrans %}These are your "work in progress" images: only you can see this list. You can show people individual images by sharing them using the <em>Share</em> menu.{% endblocktrans %}
    </div>
    {% endif %}

    {% if requested_user == request.user and has_corrupted_images %}
        <div class="alert alert-warning">
            <h4>
                <i class="icon icon-warning-sign"></i> {% trans "Oh no!" %}
            </h4>

            <p>
                {% blocktrans with "forum/c/astrobin/annoucements/currently-investigating-a-problem-with-availability-of-thumbnails/" as data_corruption_url %}
                    We are very, very sorry, but it appears that some of your images suffered a catastrophic data
                    corruption, and cannot be retrieved. Please read more <a href="{{ data_corruption_url }}">here</a>.
                {% endblocktrans %}
            </p>
            <p>
                {% blocktrans %}
                    Try clicking on the "sad face" thumbnails. If you get to your image's page, please try to use the
                    Actions menu and click on "Flag malfunctioning thumbnails". In some cases it might work. If you get
                    redirected to the "Edit basic information" form, you can replace the missing file with a copy that
                    we hope you still have.
                {% endblocktrans %}
            </p>

            <p>
                {% blocktrans %}
                    The data associated to your affected images, such as title, description, equipment used, acquisition
                    details, comments, likes, bookmarks, and so on, is still intact and safe.
                {% endblocktrans %}
            </p>

            <p>
                {% blocktrans %}
                    AstroBin would like to offer you its sincerest apologies. :(
                {% endblocktrans %}
            </p>
        </div>
    {% endif %}

    <div class="row">
        <div class="span3">
            {% include 'user/profile/meta.html' %}
        </div>

        <div class="span9"> <!-- images -->
            {% if subsection == 'nodata' %}
            <div class="well">
                {% blocktrans %}These images don't have enough data. It's a shame...{% endblocktrans %}
                {% if request.user == requested_user %}
                    {% blocktrans %}If you want your images to be categorized in albums, you should really fill in some data. Imaging telescopes, imaging cameras and subjects are the bare minimum. Dates of acquisitions are very important too.{% endblocktrans %}
                {% endif %}
            </div>
            {% endif %}

            {% image_list image_list nav_ctx='user' %}
        </div> <!-- images -->
    </div> <!-- row -->
{% endblock %}

{% block modals %}
    {% if request.user == requested_user and requested_user|is_donor %}
        {% cancel_donation_modal %}
    {% endif %}

    {% if ADS_ENABLED and not request.user|is_donor %}
        {% remove_ads_modal %}
    {% endif %}
{% endblock %}

{% block extra_js %}
    {% include 'user/profile/js.html' %}
{% endblock %}
