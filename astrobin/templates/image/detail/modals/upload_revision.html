{% load astrobin_apps_images_tags %}
{% load astrobin_apps_premium_tags %}
{% load common_tags %}
{% load bootstrap_toolkit %}
{% load i18n %}
{% load staticfiles %}

<div class="modal hide fade" id="upload-revision-modal">
    <form id="upload-revision-form" class="form-inline" action="{% url 'image_revision_upload_process' %}" method="post"
          enctype="multipart/form-data">{% csrf_token %}

        <div class="modal-header">
            <a class="close" data-dismiss="modal">&times;</a>
            <h3>{% trans "Upload new revision" %}</h3>
        </div>

        <div class="modal-body">
            <div class="well">
                {% blocktrans %}Did you improve the post-processing of your image? Upload the new
                    revision!{% endblocktrans %}
            </div>

            {% if request.user|is_any_ultimate or request.user|is_premium %}
                <div class="alert alert-info">
                    {% blocktrans trimmed with url="https://app.astrobin.com/uploader/revision" id=image.pk %}
                        Over 100 MB? Try the <a href="{{ url }}/{{ id }}">new beta uploader</a>!
                    {% endblocktrans %}
                </div>
            {% endif %}

            {{ upload_revision_form|as_bootstrap }}
            <input type="hidden" name="image_id" value="{{ image.get_id }}" />
        </div>

        <div class="modal-footer">
            <input class="btn btn-primary" type="submit" value="{% trans "Upload" %}" />
            <span class="spinner hide"><img src="{% static 'astrobin/images/loading-bar.gif' %}" alt="" /></span>
        </div>
    </form>
</div>
